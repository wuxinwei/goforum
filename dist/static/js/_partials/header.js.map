{"version":3,"sources":["../../../../static/js/_partials/header.js"],"names":["onValidate","username","password","usernameValidator","passwordValidator","test","msg","result","$","submit","val","ajax","url","dataType","contentType","type","data","JSON","stringify","success","status","alert","fail","response","responseText","statusText","click","window","location","replace","always"],"mappings":";;AAAA;AACA,IAAIA,aAAa,SAAbA,UAAa,CAACC,QAAD,EAAWC,QAAX,EAAwB;AACrC;;AACA,QAAIC,oBAAoB,wBAAxB;AAAA,QAAkD;AAC9CC,wBAAoB,4CADxB,CAFqC,CAGiC;;AAEtE,QAAID,kBAAkBE,IAAlB,CAAuBJ,QAAvB,MAAqC,IAAzC,EAA+C;AAC3C,eAAO;AACHK,iBAAK,+DACL,0EADK,GAEL,6CAHG;AAIHC,oBAAQJ,kBAAkBE,IAAlB,CAAuBJ,QAAvB;AAJL,SAAP;AAMH;AACD,QAAIG,kBAAkBC,IAAlB,CAAuBH,QAAvB,MAAqC,IAAzC,EAA+C;AAC3C,eAAO;AACHI,iBAAK,+DACL,uDADK,GAEL,mFAFK,GAGL,6CAJG;AAKHC,oBAAQH,kBAAkBC,IAAlB,CAAuBH,QAAvB;AALL,SAAP;AAOH;AACD,WAAO;AACHI,aAAK,SADF;AAEHC,gBAAQ;AAFL,KAAP;AAIH,CA1BD;;AA4BA;AACAC,EAAE,aAAF,EAAiBC,MAAjB,CAAwB,YAAM;AAC1B;;AACA,QAAIR,WAAWO,EAAE,iBAAF,EAAqBE,GAArB,EAAf;AAAA,QACIR,WAAWM,EAAE,iBAAF,EAAqBE,GAArB,EADf;AAEA,QAAIH,SAASP,WAAWC,QAAX,EAAqBC,QAArB,CAAb;;AAEA,QAAIK,OAAOA,MAAP,KAAkB,IAAtB,EAA4B;AACxBC,UAAEG,IAAF,CACI;AACIC,iBAAK,aADT;AAEIC,sBAAU,MAFd;AAGIC,yBAAa,gCAHjB;AAIIC,kBAAM,MAJV;AAKIC,kBAAMC,KAAKC,SAAL,CACF;AACIjB,0BAAUA,QADd;AAEIC,0BAAUA;AAFd,aADE,CALV;AAUIiB,qBAAS,iBAACH,IAAD,EAAOI,MAAP,EAAkB;AACvBC,sBAAM,oBAAoBL,IAApB,GAA2B,YAA3B,GAA0CI,MAAhD;AACH;AAZL,SADJ,EAeKE,IAfL,CAeU,UAACC,QAAD,EAAc;AAChBF,kBAAM,mBAAmBE,SAASC,YAA5B,GAA2C,YAA3C,GAA0DD,SAASE,UAAzE;AACH,SAjBL;AAkBH,KAnBD,MAmBO;AACHJ,cAAMd,OAAOD,GAAP,GAAa,WAAb,GAA2BJ,QAAjC;AACH;AACD,WAAO,KAAP;AACH,CA7BD;;AA+BA;AACAM,EAAE,iBAAF,EAAqBkB,KAArB,CAA4B,YAAM;AAC9B;;AACAlB,MAAEG,IAAF,CACI;AACIC,aAAK,gBADT;AAEIG,cAAM,KAFV;AAGII,iBAAS,mBAAM;AACXQ,mBAAOC,QAAP,CAAgBC,OAAhB,CAAwB,gBAAxB;AACH;AALL,KADJ,EAOOC,MAPP,CAOc,YAAM;AAChBH,eAAOC,QAAP,CAAgBC,OAAhB,CAAwB,gBAAxB;AACH,KATD;AAUH,CAZD","file":"header.js","sourcesContent":["// onValidate is that verify the inputs\nlet onValidate = (username, password) => {\n    \"use strict\";\n    let usernameValidator = /^.[a-zA-Z0-9_].{1,16}$/, // 保障用户名必须伟大小写字母以及数字下划线组成，长度控制在８~16\n        passwordValidator = /^(?=.*[A-Z])(?=.*[0-9])(?=.*[a-z]).{7,32}$/; // 保障密码至少一个大写字母，一个数字，一个小写字母，密码长度在7~32之间\n\n    if (usernameValidator.test(username) !== true) {\n        return {\n            msg: \"failed, illegal username, username regulation shows above:\" +\n            \"\\n 1. only accept upper case / lower case / digit / underscore character\" +\n            \"\\n 2. the username's length between 8 to 16\",\n            result: usernameValidator.test(username)\n        }\n    }\n    if (passwordValidator.test(password) !== true) {\n        return {\n            msg: \"failed, illegal password, password regulation shows above:\" +\n            \"\\n 1. only permitted upper case / lower case / digit \" +\n            \"\\n 2. at least contain one upper case / lower case / digit / underscore character\" +\n            \"\\n 3. the password's length between 7 to 32\",\n            result: passwordValidator.test(password)\n        }\n    }\n    return {\n        msg: \"success\",\n        result: true,\n    }\n};\n\n// login is that login logical action\n$(\".login.form\").submit(() => {\n    \"use strict\";\n    let username = $(\"#login-username\").val(),\n        password = $(\"#login-password\").val();\n    let result = onValidate(username, password);\n\n    if (result.result === true) {\n        $.ajax(\n            {\n                url: \"/user/login\",\n                dataType: \"json\",\n                contentType: \"application/json;charset=utf-8\",\n                type: \"POST\",\n                data: JSON.stringify(\n                    {\n                        username: username,\n                        password: password,\n                    }),\n                success: (data, status) => {\n                    alert(\"success, data: \" + data + \", status: \" + status);\n                }\n            })\n            .fail((response) => {\n                alert(\"failed: data: \" + response.responseText + \", status: \" + response.statusText);\n            });\n    } else {\n        alert(result.msg + \", value: \" + password);\n    }\n    return false\n});\n\n// register is action that to redirect to register page\n$(\"#register-click\").click( () => {\n    \"use strict\";\n    $.ajax(\n        {\n            url: \"/user/register\",\n            type: \"GET\",\n            success: () => {\n                window.location.replace(\"/user/register\");\n            }\n        }).always(() => {\n        window.location.replace(\"/user/register\");\n    });\n});\n"]}